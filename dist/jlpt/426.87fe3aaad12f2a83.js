"use strict";(self.webpackChunkjlpt=self.webpackChunkjlpt||[]).push([[426],{2427:(C,f,a)=>{a.r(f),a.d(f,{AuthModule:()=>A});var u=a(177),d=a(8498),e=a(7705),p=a(7981),i=a(9417);function c(t,M){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" ",n.errorMessage," ")}}function s(t,M){if(1&t&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" ",n.successMessage," ")}}let g=(()=>{class t{constructor(n,r){this.backendService=n,this.router=r,this.email="",this.password="",this.errorMessage="",this.successMessage="",this.loading=!1}login(){this.loading=!0,this.errorMessage="",this.successMessage="",this.backendService.login({email:this.email,password:this.password}).subscribe({next:n=>{this.loading=!1,this.successMessage="Login successful!",localStorage.setItem("authToken",n.token),localStorage.setItem("userId",n.data.userId),localStorage.setItem("name",n.data.fullName),"admin"==n.data.role?this.router.navigateByUrl("/admin/dashboard"):(console.log("Routing to student"),this.router.navigateByUrl("/student/dashboard"))},error:n=>{this.loading=!1,this.errorMessage=n?.error?.message||"Login failed. Please try again."}})}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(p.m),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:36,vars:6,consts:[[1,"zen-login-container"],[1,"zen-header"],["src","../../../../assets/logo.jpg",1,"logo-icon",2,"border-radius","12px","top","9px","left","-3px","width","48px","position","relative"],[1,"zen-bg"],[1,"fuji-shadow"],[1,"login-card"],[3,"ngSubmit"],["loginForm","ngForm"],["class","error-message",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","text","placeholder","\u2709\ufe0f  Email or Username","name","email","required","",3,"ngModel","ngModelChange"],["type","password","placeholder","\u{1f512} Password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"],["href","/auth/forgot",1,"forgot"],[1,"login-link"],["href","/auth/register"],[1,"site-footer"],[1,"footer-content"],[1,"footer-copyright"],[1,"footer-partner"],["src","../../../../assets/logo_organization.svg","alt","The Japan Foundation",1,"jf-logo"],[1,"partner-text"],[1,"error-message"],[1,"alert","alert-success"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.nrm(3,"img",2),e.EFF(4," JLPT Portal "),e.k0s(),e.j41(5,"p"),e.EFF(6,"\u65e5\u672c\u8a9e\u80fd\u529b\u8a66\u9a13 \u767b\u9332\u30dd\u30fc\u30bf\u30eb"),e.k0s()(),e.j41(7,"div",3),e.nrm(8,"div",4),e.j41(9,"div",5)(10,"h2"),e.EFF(11,"\u{1f510} Login"),e.k0s(),e.j41(12,"form",6,7),e.bIt("ngSubmit",function(){return o.login()}),e.DNE(14,c,2,1,"div",8),e.DNE(15,s,2,1,"div",9),e.j41(16,"input",10),e.bIt("ngModelChange",function(y){return o.email=y}),e.k0s(),e.j41(17,"input",11),e.bIt("ngModelChange",function(y){return o.password=y}),e.k0s(),e.j41(18,"button",12),e.EFF(19),e.k0s(),e.j41(20,"a",13),e.EFF(21,"Forgot password?"),e.k0s(),e.j41(22,"div",14),e.EFF(23," Don't have an account? "),e.j41(24,"a",15),e.EFF(25,"Register"),e.k0s()()()()(),e.j41(26,"footer",16)(27,"div",17)(28,"div",18),e.EFF(29," \xa92025 JALTAP Japanese Language Teachers' Association, Pune "),e.k0s(),e.j41(30,"div",19)(31,"div"),e.EFF(32,"In cooperation with:"),e.k0s(),e.nrm(33,"img",20),e.j41(34,"p",21),e.EFF(35," Official partner for Japanese language education worldwide "),e.k0s()()()()()),2&r){const m=e.sdS(13);e.R7$(14),e.Y8G("ngIf",o.errorMessage),e.R7$(1),e.Y8G("ngIf",o.successMessage),e.R7$(1),e.Y8G("ngModel",o.email),e.R7$(1),e.Y8G("ngModel",o.password),e.R7$(1),e.Y8G("disabled",o.loading||!m.valid),e.R7$(1),e.SpI(" ",o.loading?"Logging in...":"Enter Portal"," ")}},dependencies:[u.bT,i.qT,i.me,i.BC,i.cb,i.YS,i.vS,i.cV],styles:['@import"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap";@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fefefe;font-family:Noto Sans JP,sans-serif;color:#555;line-height:1.6}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700;color:#555;margin-bottom:10px}h1[_ngcontent-%COMP%]{font-weight:700;color:#bc002d;margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:1rem;color:#5d4037}hr[_ngcontent-%COMP%]{border:none;height:2px;background:linear-gradient(to right,#BC002D,#E2CFEA,#BC002D);margin:2rem auto;width:60%;border-radius:10px;position:relative}hr[_ngcontent-%COMP%]:after{content:"\\2726";position:absolute;top:-12px;left:50%;transform:translate(-50%);font-size:1.2rem;color:#bc002d;background:#fff;padding:0 .5rem}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.zen-login-container[_ngcontent-%COMP%]{font-family:Noto Sans JP,sans-serif;background:linear-gradient(to bottom,#fff8f5,#fefefe);color:#555;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:2rem;position:relative}.zen-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.zen-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#bc002d}.zen-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#5d4037;margin-top:.2rem}.zen-bg[_ngcontent-%COMP%]{position:relative;width:100%;max-width:480px;background:#FFF8E1;padding:2.5rem 2rem;border-radius:18px;box-shadow:0 12px 32px #00000014;border:1px solid white;z-index:2}.fuji-shadow[_ngcontent-%COMP%]{background:url(https://media.istockphoto.com/id/827638952/photo/pink-sakura-branches-and-fuji-mountain-background-at-kawaguchiko-lake.jpg?s=612x612&w=0&k=20&c=I7-mHcY2yX1KycQ1uz9Iu3ARX0TmaYArv8Ihk41SGrY=) no-repeat center center;background-size:cover;opacity:.08;z-index:0;border-radius:18px;position:absolute;inset:0}.login-card[_ngcontent-%COMP%]{position:relative;z-index:3}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#bc002d;margin-bottom:1.5rem;font-size:1.3rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.9rem;font-size:1rem;border:1px solid #A0D8EF;border-radius:10px;outline:none}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#bc002d;background-color:#fdfdfd}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]::placeholder{letter-spacing:.5px}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.5rem 0;font-size:.85rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.8rem;accent-color:#BC002D}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d4037}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bc002d;text-decoration:none;font-weight:500}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#bc002d;color:#fff;padding:.9rem;font-size:1rem;border:none;border-radius:10px;cursor:pointer;transition:background .3s ease-in-out}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#890021}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#d60033;color:#ccc;cursor:not-allowed;opacity:.6;transform:none}.login-link[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#5d4037}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bc002d;text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.forgot[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#5d4037;margin-top:1rem;color:#bc002d;text-decoration:none;font-weight:500}.forgot[_ngcontent-%COMP%]:hover{text-decoration:underline}footer[_ngcontent-%COMP%]{margin-top:2rem;font-size:.9rem;color:#5d4037;text-align:center}@media (max-width: 480px){.zen-login-container[_ngcontent-%COMP%]{padding:1.5rem}.zen-bg[_ngcontent-%COMP%]{padding:2rem 1.5rem}}.alert[_ngcontent-%COMP%]{padding:10px;margin-bottom:15px;border-radius:4px}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.site-footer[_ngcontent-%COMP%]{margin-top:40px;padding:20px 0;text-align:center;color:#666;font-size:14px;border-top:1px solid #eee}.footer-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:15px}.footer-partner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10px}.jf-logo[_ngcontent-%COMP%]{height:40px;margin:10px 0;filter:grayscale(30%);opacity:.8;transition:all .3s ease}.jf-logo[_ngcontent-%COMP%]:hover{filter:grayscale(0%);opacity:1}.partner-text[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:5px}@media (max-width: 600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column}.footer-partner[_ngcontent-%COMP%]{margin-top:15px}}.error-message[_ngcontent-%COMP%]{color:#bc002d;background-color:#fff0f3;border-left:4px solid #e95295;padding:.75rem 1rem;border-radius:.5rem;font-size:.95rem;margin-block:1rem;line-height:1.5;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}']})}}return t})();var l=a(3236),h=a(1584);function O(t,M){1&t&&(e.j41(0,"h2"),e.EFF(1,"\u{1f4dd} Create Account"),e.k0s())}function F(t,M){1&t&&(e.j41(0,"h2"),e.EFF(1,"\u{1f510} Verify OTP"),e.k0s())}function b(t,M){1&t&&(e.j41(0,"h2"),e.EFF(1,"\u2705 Success"),e.k0s())}function P(t,M){if(1&t&&e.nrm(0,"div",17),2&t){const n=e.XpG();e.Y8G("innerHTML",n.errorMessage,e.npT)}}function v(t,M){if(1&t&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.JRh(n.successMessage)}}function E(t,M){if(1&t){const n=e.RV6();e.j41(0,"form",19,20),e.bIt("ngSubmit",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.register())}),e.j41(2,"input",21),e.bIt("ngModelChange",function(o){e.eBV(n);const m=e.XpG();return e.Njj(m.fullName=o)}),e.k0s(),e.j41(3,"input",22),e.bIt("ngModelChange",function(o){e.eBV(n);const m=e.XpG();return e.Njj(m.email=o)}),e.k0s(),e.j41(4,"input",23),e.bIt("ngModelChange",function(o){e.eBV(n);const m=e.XpG();return e.Njj(m.phoneNumber=o)}),e.k0s(),e.j41(5,"input",24),e.bIt("ngModelChange",function(o){e.eBV(n);const m=e.XpG();return e.Njj(m.password=o)}),e.k0s(),e.j41(6,"div",25)(7,"input",26),e.bIt("ngModelChange",function(o){e.eBV(n);const m=e.XpG();return e.Njj(m.acceptTerms=o)}),e.k0s(),e.j41(8,"label",27),e.EFF(9," I agree to the "),e.j41(10,"a",28),e.EFF(11,"Terms"),e.k0s(),e.EFF(12," and "),e.j41(13,"a",28),e.EFF(14,"Privacy Policy"),e.k0s()()(),e.j41(15,"button",29),e.EFF(16),e.k0s()()}if(2&t){const n=e.sdS(1),r=e.XpG();e.R7$(2),e.Y8G("ngModel",r.fullName),e.R7$(1),e.Y8G("ngModel",r.email),e.R7$(1),e.Y8G("ngModel",r.phoneNumber),e.R7$(1),e.Y8G("ngModel",r.password),e.R7$(2),e.Y8G("ngModel",r.acceptTerms),e.R7$(8),e.Y8G("disabled",r.loading||!n.valid),e.R7$(1),e.SpI(" ",r.loading?"Registering...":"Register Account"," ")}}function w(t,M){if(1&t&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(1),e.SpI(" Expires in ",n.otpExpiresIn,"s ")}}function x(t,M){if(1&t){const n=e.RV6();e.j41(0,"form",19,30),e.bIt("ngSubmit",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.verifyOtp())}),e.j41(2,"input",31),e.bIt("ngModelChange",function(o){e.eBV(n);const m=e.XpG();return e.Njj(m.otp=o)}),e.k0s(),e.j41(3,"button",29),e.EFF(4),e.k0s(),e.DNE(5,w,2,1,"div",32),e.j41(6,"button",33),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.resendOtp())}),e.EFF(7," Resend OTP "),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(2),e.Y8G("ngModel",n.otp),e.R7$(1),e.Y8G("disabled",n.loading||n.otpExpiresIn<=0),e.R7$(1),e.SpI(" ",n.loading?"Verifying...":"Verify OTP"," "),e.R7$(1),e.Y8G("ngIf",n.otpExpiresIn>0),e.R7$(1),e.Y8G("disabled",n.otpExpiresIn>0)}}function k(t,M){1&t&&(e.j41(0,"div",35),e.EFF(1," Already have an account? "),e.j41(2,"a",36),e.EFF(3,"Login here"),e.k0s()())}function I(t,M){1&t&&(e.j41(0,"div",35),e.EFF(1," Back To Login "),e.j41(2,"a",36),e.EFF(3,"Login here"),e.k0s()())}let T=(()=>{class t{constructor(n){this.backendService=n,this.fullName="",this.email="",this.phoneNumber="",this.password="",this.acceptTerms=!1,this.otp="",this.otpSent=!1,this.otpVerified=!1,this.loading=!1,this.errorMessage="",this.successMessage="",this.otpExpiresIn=0,this.otpTimerSub=null}register(){if(this.resetMessages(),!this.acceptTerms)return void(this.errorMessage="Please accept the terms and privacy policy.");const n=this.validateRegistration();console.log(n),n.length>0?this.errorMessage=n.map(o=>`\u2022 ${o}`).join("<br>"):(this.loading=!0,this.backendService.register({fullName:this.fullName,email:this.email,phoneNumber:this.phoneNumber,password:this.password,role:"student"}).subscribe({next:()=>{this.loading=!1,this.successMessage="OTP sent to your email. Please verify.",this.otpSent=!0,this.startOtpTimer(120)},error:o=>{this.loading=!1,console.log(o),this.errorMessage=o?.error.errors[0]?.msg||"Registration failed."}}))}verifyOtp(){this.resetMessages(),this.otp?(this.loading=!0,this.backendService.verifyOtp({email:this.email,otp:this.otp}).subscribe({next:()=>{this.loading=!1,this.otpVerified=!0,this.successMessage="OTP verified! Registration complete.",this.clearOtpTimer()},error:n=>{this.loading=!1,this.errorMessage=n?.error.message||"OTP verification failed."}})):this.errorMessage="Please enter the OTP."}resendOtp(){this.resetMessages(),this.backendService.resendOtp({email:this.email}).subscribe({next:()=>{this.successMessage="New OTP sent.",this.startOtpTimer(120)},error:n=>{this.errorMessage=n?.error.errors[0]?.msg||"Failed to resend OTP."}})}startOtpTimer(n){this.otpExpiresIn=n,this.clearOtpTimer(),this.otpTimerSub=function _(t=0,M=l.E){return t<0&&(t=0),(0,h.O)(t,t,M)}(1e3).subscribe(()=>{this.otpExpiresIn--,this.otpExpiresIn<=0&&this.clearOtpTimer()})}clearOtpTimer(){this.otpTimerSub&&(this.otpTimerSub.unsubscribe(),this.otpTimerSub=null)}resetMessages(){this.errorMessage="",this.successMessage=""}validateRegistration(){const n=[];return this.fullName&&this.fullName.trim()?this.fullName.length>100&&n.push("Full name cannot exceed 100 characters"):n.push("Full name is required"),this.email&&this.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)||n.push("Please provide a valid email"):n.push("Email is required"),this.phoneNumber&&this.phoneNumber.trim()?/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,3}[-\s.]?[0-9]{3,6}$/.test(this.phoneNumber)||n.push("Please provide a valid phone number"):n.push("Phone number is required"),this.password?this.password.length<8?n.push("Password must be at least 8 characters long"):/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(this.password)||n.push("Password must contain at least one uppercase letter, one lowercase letter, one number and one special character"):n.push("Password is required"),n}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(p.m))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],decls:29,vars:9,consts:[[1,"zen-login-container"],[1,"zen-header"],["src","../../../../assets/logo.jpg",1,"logo-icon",2,"border-radius","12px","top","9px","left","-3px","width","48px","position","relative"],[1,"zen-bg"],[1,"fuji-shadow"],[1,"login-card"],[4,"ngIf"],["class","error-message",3,"innerHTML",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","login-link",4,"ngIf"],[1,"site-footer"],[1,"footer-content"],[1,"footer-copyright"],[1,"footer-partner"],["src","../../../../assets/logo_organization.svg","alt","The Japan Foundation",1,"jf-logo"],[1,"partner-text"],[1,"error-message",3,"innerHTML"],[1,"alert","alert-success"],[3,"ngSubmit"],["regForm","ngForm"],["type","text","placeholder","\u{1f464} Full Name","name","fullName","required","",3,"ngModel","ngModelChange"],["type","email","placeholder","\u2709\ufe0f Email Address","name","email","required","",3,"ngModel","ngModelChange"],["type","tel","placeholder","\u{1f4f1} Mobile Number","name","phoneNumber","required","",3,"ngModel","ngModelChange"],["type","password","placeholder","\u{1f512} Password","name","password","required","",3,"ngModel","ngModelChange"],[1,"terms"],["type","checkbox","id","terms","name","terms",3,"ngModel","ngModelChange"],["for","terms"],["href","#"],["type","submit",3,"disabled"],["otpForm","ngForm"],["type","text","placeholder","Enter OTP","name","otp","required","",3,"ngModel","ngModelChange"],["class","otp-expiry",4,"ngIf"],["type","button",3,"disabled","click"],[1,"otp-expiry"],[1,"login-link"],["href","/auth/login"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.nrm(3,"img",2),e.EFF(4," JLPT Portal "),e.k0s(),e.j41(5,"p"),e.EFF(6,"\u65e5\u672c\u8a9e\u80fd\u529b\u8a66\u9a13 \u767b\u9332\u30dd\u30fc\u30bf\u30eb"),e.k0s()(),e.j41(7,"div",3),e.nrm(8,"div",4),e.j41(9,"div",5),e.DNE(10,O,2,0,"h2",6),e.DNE(11,F,2,0,"h2",6),e.DNE(12,b,2,0,"h2",6),e.DNE(13,P,1,1,"div",7),e.DNE(14,v,2,1,"div",8),e.DNE(15,E,17,7,"form",9),e.DNE(16,x,8,5,"form",9),e.DNE(17,k,4,0,"div",10),e.DNE(18,I,4,0,"div",10),e.k0s()(),e.j41(19,"footer",11)(20,"div",12)(21,"div",13),e.EFF(22," \xa92025 JALTAP Japanese Language Teachers' Association, Pune "),e.k0s(),e.j41(23,"div",14)(24,"div"),e.EFF(25,"In cooperation with:"),e.k0s(),e.nrm(26,"img",15),e.j41(27,"p",16),e.EFF(28," Official partner for Japanese language education worldwide "),e.k0s()()()()()),2&r&&(e.R7$(10),e.Y8G("ngIf",!o.otpSent),e.R7$(1),e.Y8G("ngIf",o.otpSent&&!o.otpVerified),e.R7$(1),e.Y8G("ngIf",o.otpVerified),e.R7$(1),e.Y8G("ngIf",o.errorMessage),e.R7$(1),e.Y8G("ngIf",o.successMessage),e.R7$(1),e.Y8G("ngIf",!o.otpSent),e.R7$(1),e.Y8G("ngIf",o.otpSent&&!o.otpVerified),e.R7$(1),e.Y8G("ngIf",!o.otpVerified),e.R7$(1),e.Y8G("ngIf",o.otpVerified))},dependencies:[u.bT,i.qT,i.me,i.Zm,i.BC,i.cb,i.YS,i.vS,i.cV],styles:['@import"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap";@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fefefe;font-family:Noto Sans JP,sans-serif;color:#555;line-height:1.6}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700;color:#555;margin-bottom:10px}h1[_ngcontent-%COMP%]{font-weight:700;color:#bc002d;margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:1rem;color:#5d4037}hr[_ngcontent-%COMP%]{border:none;height:2px;background:linear-gradient(to right,#BC002D,#E2CFEA,#BC002D);margin:2rem auto;width:60%;border-radius:10px;position:relative}hr[_ngcontent-%COMP%]:after{content:"\\2726";position:absolute;top:-12px;left:50%;transform:translate(-50%);font-size:1.2rem;color:#bc002d;background:#fff;padding:0 .5rem}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.zen-login-container[_ngcontent-%COMP%]{font-family:Noto Sans JP,sans-serif;background:linear-gradient(to bottom,#fff8f5,#fefefe);color:#555;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:2rem;position:relative}.zen-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.zen-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#bc002d;margin-bottom:.5rem}.zen-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#5d4037;margin-top:0}.zen-bg[_ngcontent-%COMP%]{position:relative;width:100%;max-width:480px;background:#FFF8E1;padding:2.5rem 2rem;border-radius:18px;box-shadow:0 12px 32px #00000014;border:1px solid white;z-index:2}.fuji-shadow[_ngcontent-%COMP%]{background:url(https://media.istockphoto.com/id/827638952/photo/pink-sakura-branches-and-fuji-mountain-background-at-kawaguchiko-lake.jpg?s=612x612&w=0&k=20&c=I7-mHcY2yX1KycQ1uz9Iu3ARX0TmaYArv8Ihk41SGrY=) no-repeat center center;background-size:cover;opacity:.08;z-index:0;border-radius:18px;position:absolute;inset:0}.login-card[_ngcontent-%COMP%]{position:relative;z-index:3}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#bc002d;margin-bottom:1.5rem;font-size:1.3rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.9rem;font-size:1rem;border:1px solid #A0D8EF;border-radius:10px;outline:none;transition:all .3s ease}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#7d564a}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#bc002d;background-color:#fdfdfd;box-shadow:0 0 0 2px #bc002d1a}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]::placeholder{letter-spacing:.5px}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.5rem 0;font-size:.85rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.8rem;width:1.1em;height:1.1em;accent-color:#BC002D;cursor:pointer}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5d4037;cursor:pointer}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bc002d;text-decoration:none;font-weight:500}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .terms[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#bc002d;color:#fff;padding:.9rem;font-size:1rem;border:none;border-radius:10px;cursor:pointer;transition:background .3s ease-in-out;margin-top:.5rem;font-weight:500;letter-spacing:.5px}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#890021}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#d60033;color:#ccc;cursor:not-allowed;opacity:.6;transform:none}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{text-align:center;font-size:.85rem;color:#e95295;text-decoration:none;margin-top:.5rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#5d4037;margin-top:1rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bc002d;text-decoration:none;font-weight:500}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}footer[_ngcontent-%COMP%]{margin-top:2rem;font-size:.9rem;color:#5d4037;text-align:center;padding:1rem}@media (max-width: 480px){.zen-login-container[_ngcontent-%COMP%]{padding:1.5rem}.zen-bg[_ngcontent-%COMP%]{padding:2rem 1.5rem}.zen-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}}.alert[_ngcontent-%COMP%]{padding:10px;margin-bottom:15px;border-radius:4px;font-weight:700}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.site-footer[_ngcontent-%COMP%]{margin-top:40px;padding:20px 0;text-align:center;color:#666;font-size:14px;border-top:1px solid #eee}.footer-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:15px}.footer-partner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10px}.jf-logo[_ngcontent-%COMP%]{height:40px;margin:10px 0;filter:grayscale(30%);opacity:.8;transition:all .3s ease}.jf-logo[_ngcontent-%COMP%]:hover{filter:grayscale(0%);opacity:1}.partner-text[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:5px}@media (max-width: 600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column}.footer-partner[_ngcontent-%COMP%]{margin-top:15px}}.error-message[_ngcontent-%COMP%]{color:#bc002d;background-color:#fff0f3;border-left:4px solid #e95295;padding:.75rem 1rem;border-radius:.5rem;font-size:.95rem;margin-block:1rem;line-height:1.5;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.login-link[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:#5d4037;margin-top:1.5rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#bc002d;text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']})}}return t})();var z=a(7545);let j=(()=>{class t{constructor(n,r){this.authService=n,this.router=r}canActivate(){const n=this.authService.getUserRole();return"student"===n?(this.router.navigate(["/student/dashboard"]),!1):"admin"!==n||(this.router.navigate(["/admin/dashboard"]),!1)}static{this.\u0275fac=function(r){return new(r||t)(e.KVO(z.u),e.KVO(d.Ix))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const R=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:g,canActivate:[j]},{path:"register",component:T,canActivate:[j]},{path:"forgot",component:(()=>{class t{constructor(n,r){this.backendService=n,this.router=r,this.email="",this.password="",this.errorMessage="",this.successMessage="",this.loading=!1}forgot(){this.loading=!0,this.errorMessage="",this.successMessage="",this.backendService.forgot({email:this.email}).subscribe({next:n=>{this.loading=!1,this.successMessage="Link Sent to Email"},error:n=>{this.loading=!1,this.errorMessage=n?.error?.message||"Login failed. Please try again."}})}static{this.\u0275fac=function(r){return new(r||t)(e.rXU(p.m),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-forgot"]],decls:30,vars:1,consts:[[1,"zen-login-container"],[1,"zen-header"],["src","../../../../assets/logo.jpg",1,"logo-icon",2,"border-radius","12px","top","9px","left","-3px","width","48px","position","relative"],[1,"zen-bg"],[1,"fuji-shadow"],[1,"login-card"],[3,"ngSubmit"],["loginForm","ngForm"],["type","email","placeholder","\u2709\ufe0f Registered Email Address","name","email",3,"ngModel","ngModelChange"],["type","submit"],[1,"auth-links"],["href","#",1,"back-to-login"],[1,"site-footer"],[1,"footer-content"],[1,"footer-copyright"],[1,"footer-partner"],["src","../../../../assets/logo_organization.svg","alt","The Japan Foundation",1,"jf-logo"],[1,"partner-text"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.nrm(3,"img",2),e.EFF(4," JLPT Portal"),e.k0s(),e.j41(5,"p"),e.EFF(6,"\u65e5\u672c\u8a9e\u80fd\u529b\u8a66\u9a13 \u767b\u9332\u30dd\u30fc\u30bf\u30eb"),e.k0s()(),e.j41(7,"div",3),e.nrm(8,"div",4),e.j41(9,"div",5)(10,"h2"),e.EFF(11,"\u{1f511} Reset Password"),e.k0s(),e.j41(12,"form",6,7),e.bIt("ngSubmit",function(){return o.forgot()}),e.j41(14,"input",8),e.bIt("ngModelChange",function(y){return o.email=y}),e.k0s(),e.j41(15,"button",9),e.EFF(16,"Send Reset Link"),e.k0s(),e.j41(17,"div",10)(18,"a",11),e.EFF(19,"\u2190 Back to Login"),e.k0s()()()()(),e.j41(20,"footer",12)(21,"div",13)(22,"div",14),e.EFF(23," \xa92025 JALTAP Japanese Language Teachers' Association, Pune "),e.k0s(),e.j41(24,"div",15)(25,"div"),e.EFF(26,"In cooperation with:"),e.k0s(),e.nrm(27,"img",16),e.j41(28,"p",17),e.EFF(29," Official partner for Japanese language education worldwide "),e.k0s()()()()()),2&r&&(e.R7$(14),e.Y8G("ngModel",o.email))},dependencies:[i.qT,i.me,i.BC,i.cb,i.vS,i.cV],styles:['@import"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap";@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fefefe;font-family:Noto Sans JP,sans-serif;color:#555;line-height:1.6}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-weight:700;color:#555;margin-bottom:10px}h1[_ngcontent-%COMP%]{font-weight:700;color:#bc002d;margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:1rem;color:#5d4037}hr[_ngcontent-%COMP%]{border:none;height:2px;background:linear-gradient(to right,#BC002D,#E2CFEA,#BC002D);margin:2rem auto;width:60%;border-radius:10px;position:relative}hr[_ngcontent-%COMP%]:after{content:"\\2726";position:absolute;top:-12px;left:50%;transform:translate(-50%);font-size:1.2rem;color:#bc002d;background:#fff;padding:0 .5rem}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.zen-login-container[_ngcontent-%COMP%]{font-family:Noto Sans JP,sans-serif;background:linear-gradient(to bottom,#fff8f5,#fefefe);color:#555;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:2rem;position:relative}.zen-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.zen-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#bc002d}.zen-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#5d4037;margin-top:.2rem}.zen-bg[_ngcontent-%COMP%]{position:relative;width:100%;max-width:480px;background:#FFF8E1;padding:2.5rem 2rem;border-radius:18px;box-shadow:0 12px 32px #00000014;border:1px solid white;z-index:2}.fuji-shadow[_ngcontent-%COMP%]{background:url(https://media.istockphoto.com/id/827638952/photo/pink-sakura-branches-and-fuji-mountain-background-at-kawaguchiko-lake.jpg?s=612x612&w=0&k=20&c=I7-mHcY2yX1KycQ1uz9Iu3ARX0TmaYArv8Ihk41SGrY=) no-repeat center center;background-size:cover;opacity:.08;z-index:0;border-radius:18px;position:absolute;inset:0}.login-card[_ngcontent-%COMP%]{position:relative;z-index:3;text-align:center}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#bc002d;margin-bottom:1.8rem;font-size:1.3rem}.login-card[_ngcontent-%COMP%]   p.instructions[_ngcontent-%COMP%]{color:#5d4037;font-size:.9rem;margin-bottom:1.5rem;line-height:1.5}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.9rem;font-size:1rem;border:1px solid #A0D8EF;border-radius:10px;outline:none;text-align:center}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#bc002d;background-color:#fdfdfd;box-shadow:0 0 0 2px #bc002d1a}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#bc002d;color:#fff;padding:.9rem;font-size:1rem;border:none;border-radius:10px;cursor:pointer;transition:all .3s ease;font-weight:500}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#930023}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#d60033;color:#ccc;cursor:not-allowed;opacity:.6;transform:none}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]{margin-top:1.8rem;display:flex;flex-direction:column;gap:.8rem}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5d4037;text-decoration:none;font-size:.9rem;transition:color .2s ease;display:inline-flex;align-items:center;justify-content:center}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#bc002d;text-decoration:underline}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]   a.back-to-login[_ngcontent-%COMP%]{color:#bc002d;font-weight:500}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]   a.back-to-login[_ngcontent-%COMP%]:before{content:"\\2190";margin-right:.4rem;transition:transform .2s ease}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]   a.back-to-login[_ngcontent-%COMP%]:hover:before{transform:translate(-3px)}footer[_ngcontent-%COMP%]{margin-top:2rem;font-size:.9rem;color:#5d4037;text-align:center}@media (max-width: 480px){.zen-login-container[_ngcontent-%COMP%]{padding:1.5rem}.zen-bg[_ngcontent-%COMP%]{padding:2rem 1.5rem}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1.5rem}.login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:1rem}.login-card[_ngcontent-%COMP%]   .auth-links[_ngcontent-%COMP%]{margin-top:1.5rem}}.reset-success[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#38a169}.reset-success[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#38a169;margin-bottom:1rem}.reset-success[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .confirmation-message[_ngcontent-%COMP%]{color:#5d4037;margin-bottom:1.5rem;line-height:1.5}.site-footer[_ngcontent-%COMP%]{margin-top:40px;padding:20px 0;text-align:center;color:#666;font-size:14px;border-top:1px solid #eee}.footer-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:15px}.footer-partner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10px}.jf-logo[_ngcontent-%COMP%]{height:40px;margin:10px 0;filter:grayscale(30%);opacity:.8;transition:all .3s ease}.jf-logo[_ngcontent-%COMP%]:hover{filter:grayscale(0%);opacity:1}.partner-text[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:5px}@media (max-width: 600px){.footer-content[_ngcontent-%COMP%]{flex-direction:column}.footer-partner[_ngcontent-%COMP%]{margin-top:15px}}']})}}return t})(),canActivate:[j]}];let D=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild(R),d.iI]})}}return t})(),A=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[D,u.MD,i.YN]})}}return t})()},7545:(C,f,a)=>{a.d(f,{u:()=>e});var u=a(7705),d=a(8498);let e=(()=>{class p{constructor(c){this.router=c}saveToken(c){localStorage.setItem("authToken",c)}getToken(){return localStorage.getItem("authToken")}logout(){localStorage.removeItem("authToken"),this.router.navigate(["/auth/login"])}getUserRole(){const c=this.getToken();return c&&JSON.parse(atob(c.split(".")[1])).role||null}isStudentLoggedIn(){return"student"===this.getUserRole()}isAdminLoggedIn(){return"admin"===this.getUserRole()}static{this.\u0275fac=function(s){return new(s||p)(u.KVO(d.Ix))}}static{this.\u0275prov=u.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},7468:(C,f,a)=>{a.d(f,{p:()=>g});var u=a(1985),d=a(3073),e=a(8750),p=a(9326),i=a(4360),c=a(6450),s=a(8496);function g(...l){const h=(0,p.ms)(l),{args:_,keys:O}=(0,d.D)(l),F=new u.c(b=>{const{length:P}=_;if(!P)return void b.complete();const v=new Array(P);let E=P,w=P;for(let x=0;x<P;x++){let k=!1;(0,e.Tg)(_[x]).subscribe((0,i._)(b,I=>{k||(k=!0,w--),v[x]=I},()=>E--,void 0,()=>{(!E||!k)&&(w||b.next(O?(0,s.e)(O,v):v),b.complete())}))}});return h?F.pipe((0,c.I)(h)):F}},1584:(C,f,a)=>{a.d(f,{O:()=>i});var u=a(1985),d=a(3236),e=a(9470);function i(c=0,s,g=d.b){let l=-1;return null!=s&&((0,e.m)(s)?g=s:l=s),new u.c(h=>{let _=function p(c){return c instanceof Date&&!isNaN(c)}(c)?+c-g.now():c;_<0&&(_=0);let O=0;return g.schedule(function(){h.closed||(h.next(O++),0<=l?this.schedule(void 0,l):h.complete())},_)})}},6780:(C,f,a)=>{a.d(f,{R:()=>i});var u=a(8359);class d extends u.yU{constructor(s,g){super()}schedule(s,g=0){return this}}const e={setInterval(c,s,...g){const{delegate:l}=e;return l?.setInterval?l.setInterval(c,s,...g):setInterval(c,s,...g)},clearInterval(c){const{delegate:s}=e;return(s?.clearInterval||clearInterval)(c)},delegate:void 0};var p=a(7908);class i extends d{constructor(s,g){super(s,g),this.scheduler=s,this.work=g,this.pending=!1}schedule(s,g=0){var l;if(this.closed)return this;this.state=s;const h=this.id,_=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(_,h,g)),this.pending=!0,this.delay=g,this.id=null!==(l=this.id)&&void 0!==l?l:this.requestAsyncId(_,this.id,g),this}requestAsyncId(s,g,l=0){return e.setInterval(s.flush.bind(s,this),l)}recycleAsyncId(s,g,l=0){if(null!=l&&this.delay===l&&!1===this.pending)return g;null!=g&&e.clearInterval(g)}execute(s,g){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(s,g);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,g){let h,l=!1;try{this.work(s)}catch(_){l=!0,h=_||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),h}unsubscribe(){if(!this.closed){const{id:s,scheduler:g}=this,{actions:l}=g;this.work=this.state=this.scheduler=null,this.pending=!1,(0,p.o)(l,this),null!=s&&(this.id=this.recycleAsyncId(g,s,null)),this.delay=null,super.unsubscribe()}}}},9687:(C,f,a)=>{a.d(f,{q:()=>e});var u=a(6129);class d{constructor(i,c=d.now){this.schedulerActionCtor=i,this.now=c}schedule(i,c=0,s){return new this.schedulerActionCtor(this,i).schedule(s,c)}}d.now=u.U.now;class e extends d{constructor(i,c=d.now){super(i,c),this.actions=[],this._active=!1}flush(i){const{actions:c}=this;if(this._active)return void c.push(i);let s;this._active=!0;do{if(s=i.execute(i.state,i.delay))break}while(i=c.shift());if(this._active=!1,s){for(;i=c.shift();)i.unsubscribe();throw s}}}},3236:(C,f,a)=>{a.d(f,{E:()=>e,b:()=>p});var u=a(6780);const e=new(a(9687).q)(u.R),p=e},6129:(C,f,a)=>{a.d(f,{U:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}}}]);